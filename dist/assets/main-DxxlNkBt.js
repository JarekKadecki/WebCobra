var e=Object.defineProperty,t=(t,s,o)=>((t,s,o)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[s]=o)(t,"symbol"!=typeof s?s+"":s,o);import{r as s,j as o,c as i,R as n}from"./client-P-H6T19N.js";import{g as r,p as a,P as c}from"./phaser-DZy_kcLU.js";var l={exports:{}};function h(){}function p(){}p.resetWarningCache=h,l.exports=function(){function e(e,t,s,o,i,n){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==n){var r=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw r.name="Invariant Violation",r}}function t(){return e}e.isRequired=e;var s={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:p,resetWarningCache:h};return s.PropTypes=s,s}();const d=r(l.exports);class u extends a.Scene{constructor(){super("Boot")}preload(){this.load.image("background","assets/bg.png")}create(){this.scene.start("Preloader")}}const g=new c.Events.EventEmitter;function m(e,t,s,o,i){const n=e.add.image(t,s,o);return n.setInteractive({useHandCursor:!0}).on("pointerdown",i),n.on("pointerover",(()=>{n.setTint(11184810)})),n.on("pointerout",(()=>{n.clearTint()})),n}function y(e,t,s,o,i){var n={fontFamily:"Arial Black",fontSize:28,color:"#ffffff",stroke:"#000000",strokeThickness:3,align:"center"};return null!=i&&("fontFamily"in i&&(n.fontFamily=i.fontFamily),"fontSize"in i&&(n.fontSize=i.fontSize),"color"in i&&(n.color=i.color)),e.add.text(t,s,o,n)}class f extends a.Scene{constructor(){super("FirstBoost"),t(this,"boostPrice",5),t(this,"maxBoost",6),t(this,"scoreTableSize",15),t(this,"purchasedBoost",0),t(this,"scoreboardTable",null),t(this,"playerRecordColor",5263360),t(this,"recordColor",3158064),t(this,"currentPlayerPosition",112)}create(e){this.cameras.main.setBackgroundColor(0),this.scoreTableSize=e.scoreTableSize,this.purchasedBoost=0,this.currentPlayerPosition=e.playerPosition[e.currentRound];const t=e.scenesData.FirstBoost;y(this,.3*this.scale.width,.1*this.scale.height,t.topLeftText).setOrigin(.5),y(this,.3*this.scale.width,.2*this.scale.height,t.bottomLeftText,{fontSize:15}).setOrigin(.5);const s=this.placeBoost();y(this,.65*this.scale.width,.1*this.scale.height,t.topRightText).setOrigin(.5);const o=this.generateScoreboardInfo(e);this.scoreboardTable=this.drawTable(.65*this.scale.width,.2*this.scale.height,o.startPosition,o.playerPosition,o.playersScores);const i=m(this,100,-75,"boostUp",(()=>this.boost(1,s))),n=m(this,100,75,"boostDown",(()=>this.boost(-1,s)));this.add.container(50,this.scale.height/2,[i,n]);const r=y(this,0,-75,t.bottomRightText,{fontSize:25}).setOrigin(.5),a=m(this,0,0,"next",(()=>{e.roundBoost[e.currentRound]=this.purchasedBoost,this.currentPlayerPosition=o.playerPosition,e.playerPosition[e.currentRound]=this.currentPlayerPosition,(e=function(e){var t=e;const s=e.currentRound+1;return t.currentRound=s,s>e.gameRounds?e:t}(e=function(e){const t=e.currentRound+1;var s=e;if(1==e.roundOutcome[e.currentRound]||e.roundScore[e.currentRound]>=e.opponentScore){const o="anon"+t.toString();s.scenesData.NextOpponent.opponentImage=o,s.scenesData.Snake.opponentImage=o,s.scenesData.Outcome.opponentImage=o;const i=e.roundScore[e.currentRound]+e.opponentScoreUpgrade;s.opponentScore=i;const n=e.playerPosition[e.currentRound]??e.playerStartPosition;s.opponentPosition=Math.ceil(n*e.rankBoostFactorAfterWin)}return s}(e))).currentRound<e.gameRounds?this.scene.start("NextOpponent",e):this.registry.get("questionnaire")({roundApplesSteal:e.roundApplesSteal,roundScore:e.roundScore,roundOutcome:e.roundOutcome,roundBoost:e.roundBoost,playerPosition:e.playerPosition})}));this.add.container(.9*this.scale.width,this.scale.height/2,[r,a]),g.emit("current-scene-ready",this)}generateScoreboardInfo(e){var t=[],s=this.currentPlayerPosition;const o=e.opponentScore?e.opponentScore:10;for(let r=0;r<e.scoreTableSize;r++)t.push(Math.floor(5*Math.random()));(t=t.map((e=>2!=e?e-2:e))).sort(((e,t)=>t-e)),s=Array.isArray(e.roundOutcome)&&1===e.roundOutcome[e.currentRound]?Math.ceil(this.currentPlayerPosition*e.rankBoostFactorAfterWin):0==e.roundOutcome[e.currentRound]&&e.roundScore[e.currentRound]>o?Math.ceil(this.currentPlayerPosition*e.rankBoostFactorAfterLoose):e.playerStartPosition;var i=Math.floor(.6*e.scoreTableSize);i<7&&(i+=7-i),i>e.scoreTableSize&&(i=e.scoreTableSize);for(let r=0;r<e.scoreTableSize;r++)r!=i?t[r]+=e.roundScore[e.currentRound]??10:t[r]=e.roundScore[e.currentRound]??10;var n=s-i;return n<=0&&(n=1),{playerPosition:s,startPosition:n,playerSpotIntable:i,playersScores:t}}drawRecord(e,t,s,o=this.recordColor){const i=this.add.rectangle(0,0,400,30,o).setOrigin(.5),n=this.add.text(0,0,s,{color:"#ffffff",fontSize:"15px"}).setOrigin(.5);return this.add.container(e,t,[i,n])}drawTable(e,t,s,o,i){const n=[],r=[];for(let a=0;a<this.scoreTableSize;a++){const e=s+a,t=e===o,c=t?"You":`Player ${e}`,l=i[a],h=this.drawRecord(0,35*a,`${e}. ${c}: ${l}`,t?this.playerRecordColor:this.recordColor);n.push(h),r.push({id:e,name:c,score:l})}return{records:n,data:r,container:this.add.container(e,t,n),startId:s,playerId:o}}swapRecords(e,t){const s=this.scoreboardTable,o=e-s.startId,i=t-s.startId;if(o<0||i<0||o>=s.records.length||i>=s.records.length)return;const n=s.records[o],r=s.records[i],a=s.data[o].name,c=s.data[i].name,l=s.data[o].score,h=s.data[i].score;n.list[1].setText(`${e}. ${c}: ${l}`),r.list[1].setText(`${t}. ${a}: ${h}`),t==s.playerId&&(n.list[0].setFillStyle(this.playerRecordColor),r.list[0].setFillStyle(this.recordColor)),e==s.playerId&&(n.list[0].setFillStyle(this.recordColor),r.list[0].setFillStyle(this.playerRecordColor)),s.data[o].name=c,s.data[i].name=a,e===s.playerId?s.playerId=t:t===s.playerId&&(s.playerId=e)}placeBoost(){const e=[],t=this.textures.get("boost").getSourceImage();for(let s=0;s<this.maxBoost/3;s++)for(let o=0;o<3;o++){const i=this.add.image(s*(t.width+40),o*(t.height+40),"boost").setVisible(!1);e.push(i)}return this.add.container(350,250,e),e}boost(e,t){var s,o;const i=this.purchasedBoost+e;i>=0&&i<=this.maxBoost&&(this.purchasedBoost=i,1===e&&(null==(s=t[i-1])||s.setVisible(!0)),-1===e&&(null==(o=t[i])||o.setVisible(!1)),this.scoreboardTable&&this.swapRecords(this.scoreboardTable.playerId,this.scoreboardTable.playerId-e))}}class S extends a.Scene{constructor(){super("NextOpponent")}create(e){this.cameras.main.setBackgroundColor(0);const t=e.scenesData.NextOpponent;this.add.image(.5*this.scale.width,.5*this.scale.height,t.opponentImage),y(this,.5*this.scale.width,100,t.topText+` rank ${e.opponentPosition}, score ${e.opponentScore}`).setOrigin(),y(this,.5*this.scale.width,650,t.bottomText,{fontSize:38}).setOrigin(),g.emit("current-scene-ready",this),console.log(JSON.stringify(e)),this.time.delayedCall(5e3,(()=>{this.scene.start("TakeApples",e)}))}}class x extends a.Scene{constructor(){super("Outcome")}create(e){this.cameras.main.setBackgroundColor(0);const t=e.scenesData.Outcome,s=e.roundScore[e.currentRound]/e.opponentScore,o=this.add.image(0,0,t.playerImage).setScale(.5),i=y(this,0,150,t.leftText,{fontSize:32}).setOrigin(.5);this.add.container(200,this.scale.height/2,[o,i]);const n=this.add.image(0,0,t.opponentImage).setScale(.5),r=y(this,0,150,t.rightText,{fontSize:32}).setOrigin(.5);this.add.container(this.scale.width/2+450,this.scale.height/2,[n,r]),this.placeCrown(s);const a=this.getCentralText(s);var c=200*s/2;c>400&&(c=400);const l=this.add.rectangle(0,200,50,c,11184810).setOrigin(.5,1),h=y(this,0,220,t.leftText,{fontSize:20}).setOrigin(.5);(c=1/s*200/2)>400&&(c=400);const p=this.add.rectangle(100,200,50,c,11184810).setOrigin(.5,1),d=y(this,100,220,t.rightText,{fontSize:20}).setOrigin(.5);s>1&&(o.y-=100,l.setFillStyle(65280)),s<1&&(n.y-=100,p.setFillStyle(16711680)),this.add.container(this.scale.width/2-50,400,[a,l,h,p,d]),m(this,.85*this.scale.width,.85*this.scale.height,"next",(()=>{e.roundScore[e.currentRound]>=e.opponentScore?(e.roundOutcome[e.currentRound]=1,e.playerPosition[e.currentRound]=e.opponentPosition):(e.roundOutcome[e.currentRound]=0,0==e.currentRound?e.playerPosition[e.currentRound]=e.playerStartPosition:e.playerPosition[e.currentRound]=e.playerPosition[e.currentRound-1]),this.scene.start("FirstBoost",e)})),g.emit("current-scene-ready",this)}getCentralText(e){const t=this.add.text(50,-300,"",{fontFamily:"Arial Black",fontSize:40,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}).setOrigin(.5);return e>1?(t.setText("Victory"),t.setColor("#00ff00")):1==e?(t.setText("Tie"),t.setColor("#aaaaaa")):(t.setText("Lose"),t.setColor("#ff0000")),t}placeCrown(e){if(1==e)return null;const t=this.add.image(0,0,"crown").setScale(.5);return e>1&&t.setPosition(200,100),e<1&&t.setPosition(this.scale.width/2+450,100),t}}class b extends a.Scene{constructor(){super("Preloader")}init(){this.add.image(512,384,"background"),this.add.rectangle(512,384,468,32).setStrokeStyle(1,16777215);const e=this.add.rectangle(282,384,4,28,16777215);this.load.on("progress",(t=>{e.width=4+460*t}))}preload(){this.load.setPath("assets"),this.load.image("logo","logo.png"),this.load.image("star","star.png"),this.load.image("anon0","anon0.png"),this.load.image("anon1","anon1.png"),this.load.image("anon2","anon2.png"),this.load.image("anon3","anon3.png"),this.load.image("anon4","anon4.png"),this.load.image("anon5","anon5.png"),this.load.image("anon6","anon6.png"),this.load.image("anon7","anon7.png"),this.load.image("anon8","anon8.png"),this.load.image("anon9","anon9.png"),this.load.image("anon10","anon10.png"),this.load.image("anon11","anon11.png"),this.load.image("anon12","anon12.png"),this.load.image("anon13","anon13.png"),this.load.image("apple","apple.png"),this.load.image("appleX","appleX.png"),this.load.image("add","add.png"),this.load.image("sub","sub.png"),this.load.image("next","next.png"),this.load.image("you","you.png"),this.load.image("crown","crown.png"),this.load.image("boostUp","boostUp.png"),this.load.image("boostDown","boostDown.png"),this.load.image("boost","boost.png")}create(){const e={gameRounds:3,currentRound:3,opponentPosition:92,opponentScore:20,opponentScoreUpgrade:15,playerStartPosition:112,applesCount:12,boostPrice:5,rankBoostFactorAfterWin:.5,rankBoostFactorAfterLoose:.9,scoreTableSize:15,scenesData:{NextOpponent:{opponentImage:"anon0",topText:"Next opponent:",bottomText:"Opponent"},TakeApples:{topText:"Taking away 0 apples from opponent.",leftText:"Take apples\nfrom you opponent:",rightText:"Proceed"},Snake:{opponentImage:"anon0",topOpponentText:"Your opponent",bottomOpponentText:"Opponent",gameFieldText:"Press UP to start",scoreText:"Score: 0"},Outcome:{playerImage:"you",opponentImage:"anon0",leftText:"You",rightText:"Lee"},FirstBoost:{topLeftText:"Buy booster",bottomLeftText:"Rank up for 5 pln per boost",topRightText:"Scoreboard",bottomRightText:"Proceed"}}};var t=this.registry.get("configuration");t||(console.error("Could not get configuration. Loading default configuration"),t=e),t||(t=e),t.roundApplesSteal=[],t.roundScore=[],t.roundOutcome=[],t.roundBoost=[],t.playerPosition=[],this.scene.start("NextOpponent",t)}}function T(e,t){return e=Math.floor(e),t=Math.floor(t),Math.floor(Math.random()*Math.abs(t-e)+Math.min(e,t))}function w(e,t){for(e=Math.floor(e),t=Math.floor(t);e<0;)e+=t;return e%t}const C="Up",P="Down",k="Left",O="Right";class R{constructor(e,s,o=1e3,i,n,r){t(this,"player",[]),t(this,"apples",[]),t(this,"score",0),t(this,"frameTime",1e3),t(this,"gridSize",{x:0,y:0}),t(this,"scene",null),t(this,"gameContainer",null),t(this,"cellSize",40),t(this,"direction",C),t(this,"grow",!1),t(this,"appleColor",15728640),t(this,"playerColor",10547200),this.scene=e,this.frameTime=o,this.gridSize.x=i,this.gridSize.y=n,this.cellSize=r,this.gameContainer=s}spawnPlayer(){const e=this.randUnoccupiedCell();this.addRect(this.player,e.x,e.y)}spawnApples(e){for(let t=0;t<e;t++){const e=this.randUnoccupiedCell();this.addRect(this.apples,e.x,e.y)}}randGridCell(){return{x:T(0,this.gridSize.x),y:T(0,this.gridSize.y)}}randUnoccupiedCell(){if(this.apples.length+this.player.length>=this.gridSize.x*this.gridSize.y)return null;for(var e=!1;0==e;){e=!0;const t=this.randGridCell();for(let s of this.player)s.x==t.x&&s.y==t.y&&(e=!1);for(let s of this.apples)s.x==t.x&&s.y==t.y&&(e=!1);if(1==e)return t}}setDirection(e){(1==this.player.length||e==C&&this.direction!=P||e==P&&this.direction!=C||e==O&&this.direction!=k||e==k&&this.direction!=O)&&(this.direction=e)}getRect(e,t,s){return{rectangle:this.scene.add.rectangle(e*this.cellSize,t*this.cellSize,this.cellSize,this.cellSize,s).setOrigin(0,0),x:e,y:t}}addRect(e,t,s){var o=this.appleColor;e==this.player&&(o=this.playerColor);const i=this.getRect(t,s,o);return e.push(i),this.gameContainer.add(i.rectangle),i}movePlayer(){const e=this.player[0];if(1==this.grow){this.grow=!1;const e=this.player.at(-1);this.addRect(this.player,e.x,e.y)}var t=this.player.pop();switch(this.direction){case C:t.x=e.x,t.y=e.y-1;break;case P:t.x=e.x,t.y=e.y+1;break;case O:t.x=e.x+1,t.y=e.y;break;case k:t.x=e.x-1,t.y=e.y}t.x=w(t.x,this.gridSize.x),t.y=w(t.y,this.gridSize.y),t.rectangle.setPosition(t.x*this.cellSize,t.y*this.cellSize),this.gameContainer.add(t.rectangle),this.player.splice(0,0,t)}checkPlayerCollision(){for(let e=0;e<this.player.length;e++)for(let t=0;t<this.player.length;t++)if(e!==t&&this.player[e].x==this.player[t].x&&this.player[e].y==this.player[t].y)return!0;return!1}checkAppleCollision(){for(let e=0;e<this.apples.length;e++)for(let t of this.player)if(this.apples[e].x==t.x&&this.apples[e].y==t.y)return e;return!1}removeApple(e){e>=0&&e<this.apples.length&&(this.apples[e].rectangle.setVisible(!1).setActive(!1),this.apples.splice(e,1))}speedUp(){this.frameTime*=.9}}function z(e,t,s=0,o=1,i=80,n=4){const r=Math.ceil(t/n);var a=0,c=0,l=[];i*=o;const h=e.textures.get("apple").getSourceImage();for(let p=0;p<r;p++)for(let d=0;d<n;d++)if(c<s?(l.push(e.add.image(d*(h.width+i),p*(h.height+i),"appleX").setScale(o)),c++):l.push(e.add.image(d*(h.width+i),p*(h.height+i),"apple").setScale(o)),++a==t){p=r;break}return l}class D extends a.Scene{constructor(){super("Snake"),t(this,"gridDimetions",{x:32,y:18}),t(this,"cellSize",28),t(this,"snakeGame",null),t(this,"gameField",null),t(this,"gameFieldLabel",null),t(this,"scoreLabel",null),t(this,"cursors",null),t(this,"gamePaused",!0),t(this,"gameOver",!1),t(this,"timer",0),t(this,"updatedDirection",!1),t(this,"data",null),t(this,"gameContainer",null),t(this,"allowDirectionChange",!0)}create(e){this.cameras.main.setBackgroundColor(0);const t=this.sys.game.config.width,s=this.sys.game.config.height,o=e.scenesData.Snake;this.data=e;const i=e.roundApplesSteal[e.currentRound]??0;this.allowDirectionChange=!0;const n=this.add.image(0,0,o.opponentImage).setOrigin(.5),r=y(this,0,-300,o.topOpponentText).setOrigin(.5),a=y(this,0,300,o.bottomOpponentText+` rank ${e.opponentPosition}, score ${e.opponentScore}`,{fontSize:38}).setOrigin(.5),c=z(this,e.applesCount,i,1,50),l=this.add.container(-150,500,c),h=this.add.container(0,0,[n,r,a,l]);h.setScale(.5,.5),h.setPosition(.9*t,.3*s),this.gameField=this.add.rectangle(0,0,this.cellSize*this.gridDimetions.x,this.cellSize*this.gridDimetions.y,5263440).setOrigin(0),this.gameFieldLabel=y(this,this.gameField.width/2,this.gameField.height/2,o.gameFieldText,{fontSize:38}).setOrigin(.5),this.scoreLabel=y(this,this.gameField.width/2,-20,o.scoreText,{fontSize:30}).setOrigin(.5),console.log(`${e.applesCount} ${i}`),this.gameContainer=this.add.container(0,.15*s,[this.gameField,this.gameFieldLabel,this.scoreLabel]),this.cursors=this.input.keyboard.createCursorKeys(),this.snakeGame=new R(this,this.gameContainer,300,this.gridDimetions.x,this.gridDimetions.y,this.cellSize),i>0&&(this.snakeGame.score=i,this.scoreLabel.setText(`Score: ${this.snakeGame.score}`)),this.input.enabled=!0,this.input.keyboard.on("keydown-P",(()=>this.endGame(e.opponentScore+1)),this),g.emit("current-scene-ready",this)}update(e,t){if(this.cursors.up.isDown?(this.allowDirectionChange=!1,this.snakeGame.setDirection("Up"),this.updatedDirection=!0):this.cursors.down.isDown?(this.allowDirectionChange=!1,this.snakeGame.setDirection("Down"),this.updatedDirection=!0):this.cursors.left.isDown?(this.allowDirectionChange=!1,this.snakeGame.setDirection("Left"),this.updatedDirection=!0):this.cursors.right.isDown&&(this.allowDirectionChange=!1,this.snakeGame.setDirection("Right"),this.updatedDirection=!0),this.gamePaused)this.cursors.up.isDown&&(this.gamePaused=!1,this.gameFieldLabel.setVisible(!1),this.snakeGame.spawnPlayer(),this.snakeGame.spawnApples(2));else if(!0===this.gameOver)this.gameOver=!1,this.timer=0,this.gamePaused=!0,this.endGame();else if(this.timer+=t,this.timer>=this.snakeGame.frameTime){this.timer=0,this.snakeGame.movePlayer(),this.allowDirectionChange=!0;const e=this.snakeGame.checkAppleCollision();!1!==e&&(this.snakeGame.speedUp(),this.snakeGame.removeApple(e),this.snakeGame.grow=!0,this.snakeGame.score+=1,this.scoreLabel.setText(`Score: ${this.snakeGame.score}`),this.snakeGame.spawnApples(1)),1==this.snakeGame.checkPlayerCollision()&&(this.gameOver=!0),this.updatedDirection=!1}}endGame(e){void 0!==e&&(this.snakeGame.score=e),this.gameFieldLabel.setVisible(!0),this.gameFieldLabel.setText("Game Over"),this.children.bringToTop(this.gameFieldLabel),this.data.roundScore[this.data.currentRound]=this.snakeGame.score,this.time.delayedCall(2e3,(()=>{this.scene.start("Outcome",this.data)}))}}class v extends a.Scene{constructor(){super("TakeApples"),t(this,"applesCount",12),t(this,"applesStolen",0)}create(e){this.cameras.main.setBackgroundColor(0),"applesCount"in e?this.applesCount=e.applesCount:e.applesCount=this.applesCount,this.applesStolen=0;const t=e.scenesData.TakeApples,s=y(this,175,-120,t.topText).setOrigin(.5);var o=z(this,e.applesCount,0,1);Array.isArray(o)||(console.error("drawApples did not return a valid array."),o=[]),this.add.container(.4*this.scale.width,.3*this.scale.height,[s,...o]);const i=y(this,100,-200,t.leftText,{fontSize:20}).setOrigin(.5),n=m(this,100,-75,"add",(()=>{this.stealApples(1,s,o)})),r=m(this,100,75,"sub",(()=>{this.stealApples(-1,s,o)}));this.add.container(50,this.scale.height/2,[i,n,r]);const a=y(this,0,-75,t.rightText,{fontSize:25}).setOrigin(.5),c=m(this,0,0,"next",(()=>{e.applesCount=this.applesCount,e.roundApplesSteal[e.currentRound]=this.applesStolen,e.opponentScore-=this.applesStolen,this.scene.start("Snake",e)}));this.add.container(.9*this.scale.width,this.scale.height/2,[a,c]),g.emit("current-scene-ready",this)}stealApples(e,t,s){var o=e+this.applesStolen;if(o>=0&&o<=this.applesCount){this.applesStolen=o;for(let t=0;t<this.applesCount;t++)t<this.applesStolen?s[t].setTexture("appleX"):s[t].setTexture("apple");const e=`Taking away ${this.applesStolen} apples from opponent`;t.setText(e)}}}const F={type:Phaser.AUTO,width:1280,height:720,scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,min:{width:800,height:600},max:{width:1920,height:1080},zoom:1},physics:{default:"arcade"},parent:"game-container",backgroundColor:"#028af8",scene:[u,b,S,D,v,x,f]},A=s.forwardRef((function({currentActiveScene:e,configData:t,gameFinish:i},n){const r=s.useRef();return s.useLayoutEffect((()=>(void 0===r.current&&t&&(r.current=((e,t,s)=>{const o=new Phaser.Game({...F,parent:"game-container"});return o.registry.set("configuration",t),o.registry.set("questionnaire",s),o})(0,t,i),null!==n&&(n.current={game:r.current,scene:null})),()=>{r.current&&(r.current.destroy(!0),r.current=void 0)})),[n,t]),s.useEffect((()=>(g.on("current-scene-ready",(t=>{e instanceof Function&&e(t),n.current.scene=t})),()=>{g.removeListener("current-scene-ready")})),[e,n]),o.jsx("div",{id:"game-container"})}));function B(){const e=s.useRef(),[t,i]=s.useState(null);return s.useEffect((()=>{(async()=>{try{const e=await fetch("/api/get_configuration",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(!e.ok)throw new Error("Failed to fetch config");const t=await e.json();console.log("Configuration fetched:\n",JSON.stringify(t)),i(t)}catch(e){console.error("Error fetching config:",e)}})()}),[]),o.jsx("div",{id:"app",children:o.jsx(A,{ref:e,configData:t,currentActiveScene:e=>{},gameFinish:async e=>{await fetch("/api/submit_results",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),window.location.href="/questionnaire"}})})}A.propTypes={currentActiveScene:d.func,configData:d.object},i.createRoot(document.getElementById("root")).render(o.jsx(n.StrictMode,{children:o.jsx(B,{})}));
