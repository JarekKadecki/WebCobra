import{r as e,j as t,c as n,R as a}from"./client-CDWfY-s5.js";import"./phaser-DZy_kcLU.js";const s=({selectCallback:n})=>{const[a,s]=e.useState([]);return e.useEffect((()=>{(async()=>{const e=await fetch("/api/get_studies",{method:"POST"}),t=await e.json();s(t)})()}),[]),t.jsxs("select",{onChange:e=>n(e.target.value),defaultValue:"",children:[t.jsx("option",{value:"",disabled:!0,children:"Select study"}),a.map((e=>t.jsx("option",{value:e.name,children:e.name},e.name)))]})},o=()=>{const[n,a]=e.useState(""),[o,i]=e.useState("");return t.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),o){if("add"==o){const e={name:document.getElementById("addStudyInput").value};try{await fetch("/api/add_study",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),console.log(`Study ${e.name} sent to be added.`)}catch(t){console.error("add_study failed:",t),alert("Submission failed.")}}if("remove"==o){const e={name:n};try{await fetch("/api/remove_study",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),console.log(`Study ${n} sent to be removed.`)}catch(t){console.error("remove_study failed:",t),alert("Submission failed.")}}}else alert("Select a study to add or to remove.")},children:[t.jsx("button",{onClick:()=>i("add"),children:"Add Study"}),t.jsx("button",{onClick:()=>i("remove"),children:"Remove Study"}),"add"==o&&t.jsx("input",{type:"text",id:"addStudyInput"}),"remove"==o&&t.jsx(s,{selectCallback:a}),o&&t.jsx("button",{type:"submit"})]})},i=({study:n,editionField:a,onSubmit:s,api:o})=>{const[i,r]=e.useState("");let d="?";switch(o){case"/get_configuration":d="Configuration";break;case"/get_questions":d="Questions";break;case"/get_raport":d="Raport";break;default:d="?"}return t.jsx("button",{type:"button",onClick:async()=>{try{const e=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({study:n})});if(!e.ok)throw new Error("API request failed");const t=await e.json(),s=JSON.stringify(t,null,2);document.getElementById(a).value=s,r(s)}catch(e){console.error("Error fetching data:",e)}},children:d})},r=()=>{const[n,a]=e.useState(""),[o,r]=e.useState(""),[d,l]=e.useState(""),[u,c]=e.useState(""),y="editionArea",m=e=>()=>{r(`/api/set_${e}`),l(e)};return t.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!d||!n)return void alert("Select a study and an action before submitting.");const t={study:n,fieldToUpdate:d,value:u};try{await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),alert("Changes submitted!")}catch(a){console.error("Submission failed:",a),alert("Submission failed.")}},children:[t.jsx(s,{selectCallback:a}),n&&t.jsxs(t.Fragment,{children:[t.jsx(i,{study:n,editionField:y,onSubmit:m("configuration"),api:"/api/get_configuration"}),t.jsx(i,{study:n,editionField:y,onSubmit:m("questions"),api:"/api/get_questions"}),t.jsx("textarea",{id:y,value:u,onChange:e=>c(e.target.value),rows:12,style:{width:"100%",marginTop:"1em"}}),t.jsx("button",{type:"submit",children:"Edit data"})]})]})},d=()=>{const[n,a]=e.useState(""),[o,i]=e.useState(0);return t.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!n)return void alert("Select a study to generate keys.");if(!o||Number(o)<=0)return void alert("Select number of keys to generate.");const t={number:o,study:n};try{await fetch("/api/generate_keys",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),console.log(`Generating ${o} keys for ${n}.`)}catch(a){console.error("generate_keys failed:",a),alert("Submission failed.")}},children:[t.jsx("label",{children:"Select study"}),t.jsx("br",{}),t.jsx(s,{selectCallback:a}),t.jsx("label",{children:"Provide number o keys to generate"}),t.jsx("br",{}),t.jsx("input",{type:"number",id:"numberInput",value:"0",onChange:e=>i(e.target.value),min:"0"}),t.jsx("button",{type:"submit"})]})},l=()=>{const[n,a]=e.useState();return t.jsxs(t.Fragment,{children:[t.jsx("label",{children:"Choose panel"}),t.jsx("button",{onClick:()=>a("addRemove"),children:"Add/Remove study"}),t.jsx("br",{}),"addRemove"==n&&t.jsx(o,{}),t.jsx("button",{onClick:()=>a("edit"),children:"Edit study"}),t.jsx("br",{}),"edit"==n&&t.jsx(r,{}),t.jsx("button",{onClick:()=>a("generateKeys"),children:"Generate keys"}),t.jsx("br",{}),"generateKeys"==n&&t.jsx(d,{})]})};n.createRoot(document.getElementById("root")).render(t.jsx(a.StrictMode,{children:t.jsx(l,{})}));
