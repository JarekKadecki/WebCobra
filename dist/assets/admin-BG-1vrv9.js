import{r as e,j as t,c as n,R as s}from"./client-CDWfY-s5.js";/* empty css              */import"./phaser-DZy_kcLU.js";const a=({selectCallback:n})=>{const[s,a]=e.useState([]);return e.useEffect((()=>{(async()=>{const e=await fetch("/api/get_studies",{method:"POST"}),t=await e.json();a(t)})()}),[]),t.jsxs("select",{onChange:e=>n(e.target.value),defaultValue:"",children:[t.jsx("option",{value:"",disabled:!0,children:"Select study"}),s.map((e=>t.jsx("option",{value:e.name,children:e.name},e.name)))]})},i=()=>{const[n,s]=e.useState(""),[i,o]=e.useState("");return t.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),i){if("add"==i){const e={name:document.getElementById("addStudyInput").value};try{await fetch("/api/add_study",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),console.log(`Study ${e.name} sent to be added.`)}catch(t){console.error("add_study failed:",t),alert("Submission failed.")}}if("remove"==i){const e={name:n};try{await fetch("/api/remove_study",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),console.log(`Study ${n} sent to be removed.`)}catch(t){console.error("remove_study failed:",t),alert("Submission failed.")}}}else alert("Select a study to add or to remove.")},children:[t.jsx("button",{onClick:()=>o("add"),children:"Add Study"}),t.jsx("button",{onClick:()=>o("remove"),children:"Remove Study"}),t.jsx("br",{}),"add"==i&&t.jsxs(t.Fragment,{children:[t.jsx("label",{children:"Select name of new study"}),t.jsx("br",{}),t.jsx("input",{type:"text",id:"addStudyInput"})]}),"remove"==i&&t.jsxs(t.Fragment,{children:[t.jsx("label",{children:"Select study to remove "}),t.jsx("br",{}),t.jsx(a,{selectCallback:s}),t.jsx("br",{})]}),i&&t.jsx("button",{type:"submit",children:"Submit"})]})},o=({study:n,editionField:s,onSubmit:a,api:i})=>{const[o,r]=e.useState("");let d="?";switch(i){case"/get_configuration":d="Configuration";break;case"/get_questions":d="Questions";break;case"/get_raport":d="Raport";break;default:d="?"}return t.jsx("button",{type:"button",onClick:async()=>{try{const e=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({study:n})});if(!e.ok)throw new Error("API request failed");const t=await e.json(),a=JSON.stringify(t,null,2);document.getElementById(s).value=a,r(a)}catch(e){console.error("Error fetching data:",e)}},children:d})},r=()=>{const[n,s]=e.useState(""),[i,r]=e.useState(""),[d,l]=e.useState(""),[c,u]=e.useState(""),m="editionArea",y=e=>()=>{r(`/api/set_${e}`),l(e)};return t.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!d||!n)return void alert("Select a study and an action before submitting.");const t={study:n,fieldToUpdate:d,value:c};try{await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),alert("Changes submitted!")}catch(s){console.error("Submission failed:",s),alert("Submission failed.")}},children:[t.jsx(a,{selectCallback:s}),t.jsx("br",{}),n&&t.jsxs(t.Fragment,{children:[t.jsx(o,{study:n,editionField:m,onSubmit:y("configuration"),api:"/api/get_configuration"}),t.jsx(o,{study:n,editionField:m,onSubmit:y("questions"),api:"/api/get_questions"}),t.jsx("br",{}),t.jsx("textarea",{id:m,value:c,onChange:e=>u(e.target.value),rows:12,style:{width:"100%",marginTop:"1em"}}),t.jsx("br",{}),t.jsx("button",{type:"submit",children:"Edit data"})]})]})},d=()=>{const[n,s]=e.useState(""),[i,o]=e.useState(0);return t.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!n)return void alert("Select a study to generate keys.");if(!i||Number(i)<=0)return void alert("Select number of keys to generate.");const t={number:i,study:n};try{await fetch("/api/generate_keys",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),console.log(`Generating ${i} keys for ${n}.`)}catch(s){console.error("generate_keys failed:",s),alert("Submission failed.")}},children:[t.jsx("label",{children:"Select study"}),t.jsx("br",{}),t.jsx(a,{selectCallback:s}),t.jsx("br",{}),t.jsx("label",{children:"Provide number o keys to generate"}),t.jsx("br",{}),t.jsx("input",{type:"number",id:"numberInput",value:"0",onChange:e=>o(e.target.value),min:"0"}),t.jsx("br",{}),t.jsx("button",{type:"submit",children:"Submit"})]})},l=()=>{const[n,s]=e.useState();return t.jsxs(t.Fragment,{children:[t.jsxs("div",{id:"leftAdminPanel",children:[t.jsx("label",{children:"Choose panel"}),t.jsxs("div",{children:[t.jsx("button",{class:"leftAdminPanelButtons",onClick:()=>s("addRemove"),children:"Add/Remove study"}),t.jsx("br",{}),t.jsx("button",{class:"leftAdminPanelButtons",onClick:()=>s("edit"),children:"Edit study"}),t.jsx("br",{}),t.jsx("button",{class:"leftAdminPanelButtons",onClick:()=>s("generateKeys"),children:"Generate keys"}),t.jsx("br",{})]})]}),t.jsxs("div",{id:"centralAdminPanel",children:["addRemove"==n&&t.jsx(i,{}),"edit"==n&&t.jsx(r,{}),"generateKeys"==n&&t.jsx(d,{})]})]})};n.createRoot(document.getElementById("root")).render(t.jsx(s.StrictMode,{children:t.jsx(l,{})}));
